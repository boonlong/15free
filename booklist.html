<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <title>15 years free book</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- FontAwesome CSS -->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="css/swiper.min.css">
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="http://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">

</head>

<body>
    <div class="container-fluid">
        <header class="site-header">
            <div class="row align-items-center">
                <div class="col-4 col-sm-4 col-lg-2 order-lg-1">
                    <div class="site-branding">
                        <h1 class="site-title">
                            <a href="index.html" rel="home"><img src="images/logo.png" alt="Logo"></a>
                        </h1>
                    </div>
                    <!-- .site-branding -->
                </div>
                <!-- .col-8 -->

                <div class="col-8 col-sm-8 col-lg-10 order-3 order-md-3 order-lg-2" id="divmenu">
                    
                    <!-- .site-navigation -->
                </div>
                <!-- .col-2 -->
            </div>
            <!-- .row -->
        </header>
        <!-- .site-header -->

        <div id="hero-sel">
            <div class="hero-section">


<div class="row">
    <div class="content-area single-post col-12">
        <table id="example" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>year</th>
                    <th>subj_id</th>
                    <th>subj_name</th>
                    <th>author</th>
                    <th>price</th>
                    <th>publisher</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <th>ID</th>
                    <th>year</th>
                    <th>subj_id</th>
                    <th>subj_name</th>
                    <th>author</th>
                    <th>price</th>
                    <th>publisher</th>
                </tr>
            </tfoot>
        </table>
        <!-- .single-post -->
    </div>
    <!-- .content-area -->
</div>
<!-- .row -->
<script>
    setTimeout(function() {
        $('#example').DataTable({
            ajax: {
                url: 'datajson.json',
                dataSrc: ''
            },
            columns: [{
                data: 'ID'
            }, {
                data: 'year'
            }, {
                data: 'subj_id'
            }, {
                data: 'subj_name'
            }, {
                data: 'author'
            }, {
                data: 'price'
            }, {
                data: 'publisher'
            }],
            
        });
        var table = $('#example').DataTable();
        var selbook=[]; 
        $('#example tbody').on('click', 'tr', function() {
            $(this).toggleClass('selected');
            //console.log(table.row(this).data().ID);
            let dt=table.row(this).data();
            let book={'ID':dt.ID,'year':dt.year,'sec':dt.sec,'no':dt.no,'subj_id':dt.subj_id,'subj_name':dt.subj_name,'author':dt.author,'price':dt.price,'publisher':dt.publisher};
            //let book=[dt.ID,dt.year,dt.sec,dt.no,dt.subj_id,dt.subj_name,dt.author,dt.price,dt.publisher];
            
            const bookExists=selbook.some(selbook=>selbook.id=book.id)
            if(bookExists) {
                selbook = selbook.filter(selbook => selbook.id != book.id);
            } else {
                selbook.push(book);
            }
            adddb(table.row(this).data().ID+"::"+table.row(this).data().year+"::"+table.row(this).data().sec+"::"+table.row(this).data().no+"::"+table.row(this).data().subj_id+"::"+table.row(this).data().subj_name+"::"+table.row(this).data().author+"::"+table.row(this).data().price+"::"+table.row(this).data().publisher);
            console.log(selbook);
            setSelBook(selbook);
        });

        $('#button').click(function() {
            alert(table.rows('.selected').data().length + ' row(s) selected');
            //removedb(table.row(this).data().ID);
            //let book={'id':dt.ID,'year':dt.year,'sec':dt.sec,'no':dt.no,'subj_id':dt.subj_id,'subj_name':dt.subj_name,'author':dt.author,'price':dt.price,'publisher':dt.publisher};
            //selbook.pop(book);
        });
    },2000);
</script>
</div>
<!-- .row -->
</div>
</div>
<!-- .hero-section -->

<footer class="site-footer" id="divfoot">

<!-- .row -->
</footer>
<!-- .site-footer -->
</div>
<!-- .container-fluid -->

<script type='text/javascript' src='js/jquery-3.3.1.js'></script>
<script type='text/javascript' src='js/swiper.min.js'></script>
<script type='text/javascript' src='js/jquery.magnific-popup.min.js'></script>
<script type='text/javascript' src='js/masonry.pkgd.min.js'></script>
<script type='text/javascript' src='js/custom.js'></script>

<script type='text/javascript' src='js/jquery.dataTables.min.js'></script>
<script type='text/javascript' src='js/dataTables.bootstrap4.min.js'></script>
<script type='text/javascript' src='main.js'></script>

</body>

</html>